<div class="container">
  <app-section-title name="About Page" />
  <div class="row">
    <form [formGroup]="myForm">
      <table>
        <tbody>
          <tr>
            <td>Description:</td>
            <td>
              @if(!editMode){
              {{ aboutInfo ? aboutInfo.description : "Loading...z" }} } @else {
              <textarea
                rows="5"
                cols="200"
                formControlName="description"
              ></textarea>
              }
            </td>
          </tr>
          <tr>
            <td>Image:</td>
            <td>
              @if(!editMode){
              <img [src]="aboutInfo ? imgUrl + '/' + aboutInfo.image : '#'" /> }
              @else {
              <input type="file" formControlName="image" id="imageInput" />
              }
            </td>
          </tr>
        </tbody>
      </table>
    </form>
  </div>
  <div class="row">
    @if(!editMode){
    <button class="btn btn-primary mt-5 pe-3 ps-3" (click)="toggleEditMode()">
      Edit
    </button>
    } @else {
    <button
      class="btn btn-primary mt-5 pe-3 ps-3"
      (click)="submitForm()"
      [disabled]="
        myForm.get('description')?.errors || myForm.get('image')?.errors
      "
    >
      Save
    </button>
    } @if(failMessage){
    <div class="alert alert-danger mt-2 text-center">
      Something wrong happened. Please try again. Error: {{ errorMessage }}
    </div>
    }
  </div>
</div>
